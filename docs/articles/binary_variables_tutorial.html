<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Handling Binary and Categorical Variables • rCISSVAE</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Handling Binary and Categorical Variables">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rCISSVAE</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1.0000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/CISS-VAE/rCISS-VAE" aria-label="GitHub"><span class="fa fa-github"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://ciss-vae.readthedocs.io/en/latest/index.html" aria-label="CISS-VAE"><span class="filetype filetype-py"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Handling Binary and Categorical Variables</h1>
            
            <h4 data-toc-skip class="date">2025-10-21</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/CISS-VAE/rCISS-VAE/blob/HEAD/vignettes/binary_variables_tutorial.rmd" class="external-link"><code>vignettes/binary_variables_tutorial.rmd</code></a></small>
      <div class="d-none name"><code>binary_variables_tutorial.rmd</code></div>
    </div>

    
    
<p>The CISS-VAE model can handle binary and categorical variables, but
categorical variables must first be converted into binary dummy
variables.</p>
<p>The <a href="https://allisonhorst.github.io/palmerpenguins/" class="external-link">Palmer
Penguins</a> dataset has both continuous (bill_length, bill_depth,
flipper_length, body_mass) and categorical (species, island, sex) values
so it makes a good example for this. We can use the
<code><a href="https://jacobkap.github.io/fastDummies/reference/dummy_cols.html" class="external-link">dummy_cols()</a></code> function from the <code>fastDummies</code>
package to create dummy variables for our categoricals. To avoid
multicolinearity, we can remove the first dummy variable for each
categorical by setting <code>remove_first_dummy = TRUE</code>. Set
<code>ignore_na = TRUE</code> and
<code>remove_selected_columns = TRUE</code> to avoid creating a new
column for NA values and to remove the original categoricals once the
dummies are created.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/" class="external-link">kableExtra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/reticulate/" class="external-link">reticulate</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ciss-vae.github.io/rCISS-VAE">rCISSVAE</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jacobkap/fastDummies" class="external-link">fastDummies</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://allisonhorst.github.io/palmerpenguins/" class="external-link">palmerpenguins</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Attaching package: 'palmerpenguins'</span></span></code></pre>
<pre><code><span><span class="co">## The following objects are masked from 'package:datasets':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     penguins, penguins_raw</span></span></code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">'palmerpenguins'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">penguins_clean</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.omit</a></span><span class="op">(</span><span class="va">penguins</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">year</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="co">## removing existing incomplete rows for illustration purposes</span></span>
<span></span>
<span><span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span><span class="st">"Dimensions: {paste0(dim(penguins), collapse = ',')}"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Dimensions: 344,8</span></span></code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">penguins_clean</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="5%">
<col width="8%">
<col width="11%">
<col width="16%">
<col width="15%">
<col width="20%">
<col width="13%">
<col width="7%">
</colgroup>
<thead><tr class="header">
<th align="right">year</th>
<th align="left">species</th>
<th align="left">island</th>
<th align="right">bill_length_mm</th>
<th align="right">bill_depth_mm</th>
<th align="right">flipper_length_mm</th>
<th align="right">body_mass_g</th>
<th align="left">sex</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">2007</td>
<td align="left">Adelie</td>
<td align="left">Torgersen</td>
<td align="right">39.1</td>
<td align="right">18.7</td>
<td align="right">181</td>
<td align="right">3750</td>
<td align="left">male</td>
</tr>
<tr class="even">
<td align="right">2007</td>
<td align="left">Adelie</td>
<td align="left">Torgersen</td>
<td align="right">39.5</td>
<td align="right">17.4</td>
<td align="right">186</td>
<td align="right">3800</td>
<td align="left">female</td>
</tr>
<tr class="odd">
<td align="right">2007</td>
<td align="left">Adelie</td>
<td align="left">Torgersen</td>
<td align="right">40.3</td>
<td align="right">18.0</td>
<td align="right">195</td>
<td align="right">3250</td>
<td align="left">female</td>
</tr>
<tr class="even">
<td align="right">2007</td>
<td align="left">Adelie</td>
<td align="left">Torgersen</td>
<td align="right">36.7</td>
<td align="right">19.3</td>
<td align="right">193</td>
<td align="right">3450</td>
<td align="left">female</td>
</tr>
<tr class="odd">
<td align="right">2007</td>
<td align="left">Adelie</td>
<td align="left">Torgersen</td>
<td align="right">39.3</td>
<td align="right">20.6</td>
<td align="right">190</td>
<td align="right">3650</td>
<td align="left">male</td>
</tr>
<tr class="even">
<td align="right">2007</td>
<td align="left">Adelie</td>
<td align="left">Torgersen</td>
<td align="right">38.9</td>
<td align="right">17.8</td>
<td align="right">181</td>
<td align="right">3625</td>
<td align="left">female</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## create penguins_missing</span></span>
<span><span class="va">n</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">penguins_clean</span><span class="op">)</span></span>
<span><span class="va">p</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">penguins_clean</span><span class="op">)</span></span>
<span><span class="va">m</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">floor</a></span><span class="op">(</span><span class="fl">0.20</span> <span class="op">*</span> <span class="va">n</span> <span class="op">*</span> <span class="va">p</span><span class="op">)</span>               <span class="co"># number of cells to mask</span></span>
<span><span class="va">idx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample.int</a></span><span class="op">(</span><span class="va">n</span> <span class="op">*</span> <span class="va">p</span>, <span class="va">m</span><span class="op">)</span>             <span class="co"># positions in a logical matrix</span></span>
<span></span>
<span><span class="va">mask</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="cn">FALSE</span>, nrow <span class="op">=</span> <span class="va">n</span>, ncol <span class="op">=</span> <span class="va">p</span><span class="op">)</span></span>
<span><span class="va">mask</span><span class="op">[</span><span class="va">idx</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span></span>
<span></span>
<span><span class="va">penguins_missing</span> <span class="op">&lt;-</span> <span class="va">penguins_clean</span></span>
<span></span>
<span><span class="co">## anything can be missing except the year</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">j</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">2</span>, <span class="va">p</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">penguins_missing</span><span class="op">[[</span><span class="va">j</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="va">mask</span><span class="op">[</span>, <span class="va">j</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NaN</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># quick check of missingness rate</span></span>
<span><span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span><span class="st">"\nMissingness proportion of penguins_missing: {round(mean(is.na(as.matrix(penguins_missing))), 2)}"</span><span class="op">)</span> </span></code></pre></div>
<pre><code><span><span class="co">## Missingness proportion of penguins_missing: 0.17</span></span></code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## create dummy vars</span></span>
<span></span>
<span><span class="va">penguin_dummies_complete</span> <span class="op">=</span> <span class="va">penguins_clean</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://jacobkap.github.io/fastDummies/reference/dummy_cols.html" class="external-link">dummy_cols</a></span><span class="op">(</span>select_columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"species"</span>, <span class="st">"island"</span>, <span class="st">"sex"</span><span class="op">)</span>,</span>
<span>    ignore_na <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    remove_first_dummy <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    remove_selected_columns <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">penguin_dummies</span> <span class="op">=</span> <span class="va">penguins_missing</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://jacobkap.github.io/fastDummies/reference/dummy_cols.html" class="external-link">dummy_cols</a></span><span class="op">(</span>select_columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"species"</span>, <span class="st">"island"</span>, <span class="st">"sex"</span><span class="op">)</span>,</span>
<span>    ignore_na <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    remove_first_dummy <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    remove_selected_columns <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">penguin_dummies</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="3%">
<col width="11%">
<col width="10%">
<col width="13%">
<col width="8%">
<col width="13%">
<col width="11%">
<col width="9%">
<col width="12%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="right">year</th>
<th align="right">bill_length_mm</th>
<th align="right">bill_depth_mm</th>
<th align="right">flipper_length_mm</th>
<th align="right">body_mass_g</th>
<th align="right">species_Chinstrap</th>
<th align="right">species_Gentoo</th>
<th align="right">island_Dream</th>
<th align="right">island_Torgersen</th>
<th align="right">sex_male</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">2007</td>
<td align="right">39.1</td>
<td align="right">NaN</td>
<td align="right">181</td>
<td align="right">3750</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2007</td>
<td align="right">39.5</td>
<td align="right">17.4</td>
<td align="right">186</td>
<td align="right">3800</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">2007</td>
<td align="right">40.3</td>
<td align="right">18.0</td>
<td align="right">195</td>
<td align="right">3250</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">2007</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">193</td>
<td align="right">3450</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">2007</td>
<td align="right">39.3</td>
<td align="right">NaN</td>
<td align="right">190</td>
<td align="right">3650</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="right">2007</td>
<td align="right">38.9</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>Now that the dummy vars are created and there is missingness, we can
create a <code>binary_feature_mask</code> and impute with
<code><a href="../reference/run_cissvae.html">run_cissvae()</a></code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">binary_feature_mask</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="cn">FALSE</span>, <span class="fl">5</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span><span class="st">"Binary Feature Mask: {paste0(binary_feature_mask, collapse = ', ')}"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Binary Feature Mask: FALSE, FALSE, FALSE, FALSE, FALSE, TRUE, TRUE, TRUE, TRUE, TRUE</span></span></code></pre>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">=</span> <span class="fu"><a href="../reference/run_cissvae.html">run_cissvae</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">penguin_dummies</span>,</span>
<span>    val_proportion <span class="op">=</span> <span class="fl">0.20</span>, <span class="co">## small dataset so using higher val proportion</span></span>
<span>    columns_ignore <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>    binary_feature_mask <span class="op">=</span> <span class="va">binary_feature_mask</span>,</span>
<span>    clusters <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    n_clusters <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    scale_features <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    epochs <span class="op">=</span> <span class="fl">500</span>,</span>
<span>    debug <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Cluster dataset:</span></span>
<span><span class="co">##  ClusterDataset(n_samples=333, n_features=10, n_clusters=1)</span></span>
<span><span class="co">##   • Original missing: 600 / 2997 (20.02%)</span></span>
<span><span class="co">##   • Validation held-out: 475 (19.82% of non-missing)</span></span>
<span><span class="co">##   • .data shape:     (333, 10)</span></span>
<span><span class="co">##   • .masks shape:    (333, 10)</span></span>
<span><span class="co">##   • .val_data shape: (333, 10)</span></span></code></pre>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">results</span><span class="op">$</span><span class="va">imputed_dataset</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   year bill_length_mm bill_depth_mm flipper_length_mm body_mass_g</span></span>
<span><span class="co">## 0 2007       39.10000      18.94397          181.0000    3750.000</span></span>
<span><span class="co">## 1 2007       39.50000      17.40000          186.0000    3800.000</span></span>
<span><span class="co">## 2 2007       40.30000      18.00000          195.0000    3250.000</span></span>
<span><span class="co">## 3 2007       40.80159      16.83186          193.0000    3450.000</span></span>
<span><span class="co">## 4 2007       39.30000      17.01959          190.0000    3650.000</span></span>
<span><span class="co">## 5 2007       38.90000      18.13265          185.1796    3692.932</span></span>
<span><span class="co">##   species_Chinstrap species_Gentoo island_Dream island_Torgersen    sex_male</span></span>
<span><span class="co">## 0      0.000000e+00   0.000000e+00 0.000000e+00     1.0000000000 1.00000e+00</span></span>
<span><span class="co">## 1      2.437442e-08   1.341910e-08 1.485856e-05     0.2325963527 0.00000e+00</span></span>
<span><span class="co">## 2      0.000000e+00   0.000000e+00 0.000000e+00     1.0000000000 0.00000e+00</span></span>
<span><span class="co">## 3      9.223840e-06   1.407677e-06 7.667059e-04     0.0004899421 0.00000e+00</span></span>
<span><span class="co">## 4      0.000000e+00   0.000000e+00 2.522155e-03     0.0009408559 7.15132e-06</span></span>
<span><span class="co">## 5      0.000000e+00   0.000000e+00 0.000000e+00     1.0000000000 0.00000e+00</span></span></code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">penguin_dummies</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 6 × 10</span></span></span>
<span><span class="co">##    year bill_length_mm bill_depth_mm flipper_length_mm body_mass_g</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>  <span style="text-decoration: underline;">2</span>007           39.1         <span style="color: #BB0000;">NaN</span>                 181        <span style="text-decoration: underline;">3</span>750</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>  <span style="text-decoration: underline;">2</span>007           39.5          17.4               186        <span style="text-decoration: underline;">3</span>800</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>  <span style="text-decoration: underline;">2</span>007           40.3          18                 195        <span style="text-decoration: underline;">3</span>250</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>  <span style="text-decoration: underline;">2</span>007          <span style="color: #BB0000;">NaN</span>           <span style="color: #BB0000;">NaN</span>                 193        <span style="text-decoration: underline;">3</span>450</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span>  <span style="text-decoration: underline;">2</span>007           39.3         <span style="color: #BB0000;">NaN</span>                 190        <span style="text-decoration: underline;">3</span>650</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span>  <span style="text-decoration: underline;">2</span>007           38.9         <span style="color: #BB0000;">NaN</span>                 <span style="color: #BB0000;">NaN</span>         <span style="color: #BB0000;">NaN</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 5 more variables: species_Chinstrap &lt;int&gt;, species_Gentoo &lt;int&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   island_Dream &lt;int&gt;, island_Torgersen &lt;int&gt;, sex_male &lt;int&gt;</span></span></span></code></pre>
<p>As we can see above, the imputed values for the binary variables are
in terms of probability not a flat 0,1 so we have to convert those
values.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span><span class="op">$</span><span class="va">imputed_dataset</span> <span class="op">&lt;-</span> <span class="va">results</span><span class="op">$</span><span class="va">imputed_dataset</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span></span>
<span>    .cols <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches</a></span><span class="op">(</span><span class="st">"species|island|sex"</span><span class="op">)</span>,</span>
<span>    .fns <span class="op">=</span> <span class="op">~</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">.x</span> <span class="op">&gt;</span> <span class="fl">0.5</span> <span class="op">~</span> <span class="fl">1</span>,</span>
<span>      <span class="va">.x</span> <span class="op">&lt;=</span> <span class="fl">0.5</span> <span class="op">~</span> <span class="fl">0</span>,</span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="va">.x</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">results</span><span class="op">$</span><span class="va">imputed_dataset</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   year bill_length_mm bill_depth_mm flipper_length_mm body_mass_g</span></span>
<span><span class="co">## 0 2007       39.10000      18.94397          181.0000    3750.000</span></span>
<span><span class="co">## 1 2007       39.50000      17.40000          186.0000    3800.000</span></span>
<span><span class="co">## 2 2007       40.30000      18.00000          195.0000    3250.000</span></span>
<span><span class="co">## 3 2007       40.80159      16.83186          193.0000    3450.000</span></span>
<span><span class="co">## 4 2007       39.30000      17.01959          190.0000    3650.000</span></span>
<span><span class="co">## 5 2007       38.90000      18.13265          185.1796    3692.932</span></span>
<span><span class="co">##   species_Chinstrap species_Gentoo island_Dream island_Torgersen sex_male</span></span>
<span><span class="co">## 0                 0              0            0                1        1</span></span>
<span><span class="co">## 1                 0              0            0                0        0</span></span>
<span><span class="co">## 2                 0              0            0                1        0</span></span>
<span><span class="co">## 3                 0              0            0                0        0</span></span>
<span><span class="co">## 4                 0              0            0                0        0</span></span>
<span><span class="co">## 5                 0              0            0                1        0</span></span></code></pre>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">penguin_dummies</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 6 × 10</span></span></span>
<span><span class="co">##    year bill_length_mm bill_depth_mm flipper_length_mm body_mass_g</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>  <span style="text-decoration: underline;">2</span>007           39.1         <span style="color: #BB0000;">NaN</span>                 181        <span style="text-decoration: underline;">3</span>750</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>  <span style="text-decoration: underline;">2</span>007           39.5          17.4               186        <span style="text-decoration: underline;">3</span>800</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>  <span style="text-decoration: underline;">2</span>007           40.3          18                 195        <span style="text-decoration: underline;">3</span>250</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>  <span style="text-decoration: underline;">2</span>007          <span style="color: #BB0000;">NaN</span>           <span style="color: #BB0000;">NaN</span>                 193        <span style="text-decoration: underline;">3</span>450</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span>  <span style="text-decoration: underline;">2</span>007           39.3         <span style="color: #BB0000;">NaN</span>                 190        <span style="text-decoration: underline;">3</span>650</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span>  <span style="text-decoration: underline;">2</span>007           38.9         <span style="color: #BB0000;">NaN</span>                 <span style="color: #BB0000;">NaN</span>         <span style="color: #BB0000;">NaN</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 5 more variables: species_Chinstrap &lt;int&gt;, species_Gentoo &lt;int&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   island_Dream &lt;int&gt;, island_Torgersen &lt;int&gt;, sex_male &lt;int&gt;</span></span></span></code></pre>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">penguin_dummies_complete</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 6 × 10</span></span></span>
<span><span class="co">##    year bill_length_mm bill_depth_mm flipper_length_mm body_mass_g</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>  <span style="text-decoration: underline;">2</span>007           39.1          18.7               181        <span style="text-decoration: underline;">3</span>750</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>  <span style="text-decoration: underline;">2</span>007           39.5          17.4               186        <span style="text-decoration: underline;">3</span>800</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>  <span style="text-decoration: underline;">2</span>007           40.3          18                 195        <span style="text-decoration: underline;">3</span>250</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>  <span style="text-decoration: underline;">2</span>007           36.7          19.3               193        <span style="text-decoration: underline;">3</span>450</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span>  <span style="text-decoration: underline;">2</span>007           39.3          20.6               190        <span style="text-decoration: underline;">3</span>650</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span>  <span style="text-decoration: underline;">2</span>007           38.9          17.8               181        <span style="text-decoration: underline;">3</span>625</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 5 more variables: species_Chinstrap &lt;int&gt;, species_Gentoo &lt;int&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   island_Dream &lt;int&gt;, island_Torgersen &lt;int&gt;, sex_male &lt;int&gt;</span></span></span></code></pre>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Yasin Khadem Charvadeh, Danielle Vaithilingam, Kenneth Seier, Katherine S. Panageas, Mithat Gönen, Yuan Chen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
