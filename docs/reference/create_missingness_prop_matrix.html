<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create Missingness Proportion Matrix — create_missingness_prop_matrix • rCISSVAE</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create Missingness Proportion Matrix — create_missingness_prop_matrix"><meta name="description" content="Creates a matrix where each entry represents the proportion of missing values
for each sample–feature combination across multiple timepoints. Each sample will have
one proportion value per feature. Features may have repeated time points
(columns named like feature_1, feature_2, ...). This matrix can be used
with cluster_on_missing_prop() to group samples with similar missingness patterns."><meta property="og:description" content="Creates a matrix where each entry represents the proportion of missing values
for each sample–feature combination across multiple timepoints. Each sample will have
one proportion value per feature. Features may have repeated time points
(columns named like feature_1, feature_2, ...). This matrix can be used
with cluster_on_missing_prop() to group samples with similar missingness patterns."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rCISSVAE</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/CISS-VAE/rCISS-VAE" aria-label="GitHub"><span class="fa fa-github"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://ciss-vae.readthedocs.io/en/latest/index.html" aria-label="CISS-VAE"><span class="filetype filetype-py"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Create Missingness Proportion Matrix</h1>
      <small class="dont-index">Source: <a href="https://github.com/CISS-VAE/rCISS-VAE/blob/HEAD/R/missing_prop_matrix.R" class="external-link"><code>R/missing_prop_matrix.R</code></a></small>
      <div class="d-none name"><code>create_missingness_prop_matrix.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Creates a matrix where each entry represents the proportion of missing values
for each sample–feature combination across multiple timepoints. Each sample will have
one proportion value per feature. Features may have repeated time points
(columns named like <code>feature_1</code>, <code>feature_2</code>, ...). This matrix can be used
with <code><a href="cluster_on_missing_prop.html">cluster_on_missing_prop()</a></code> to group samples with similar missingness patterns.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">create_missingness_prop_matrix</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  index_col <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cols_ignore <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  na_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NaN</span>, <span class="cn">Inf</span>, <span class="op">-</span><span class="cn">Inf</span><span class="op">)</span>,</span>
<span>  repeat_feature_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>,</span>
<span>  loose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Data frame or matrix containing the input data with potential missing values.</p></dd>


<dt id="arg-index-col">index_col<a class="anchor" aria-label="anchor" href="#arg-index-col"></a></dt>
<dd><p>Character scalar. Name of an index column to exclude from analysis (optional).
If supplied and present, it will be removed from analysis; row names are preserved as-is.</p></dd>


<dt id="arg-cols-ignore">cols_ignore<a class="anchor" aria-label="anchor" href="#arg-cols-ignore"></a></dt>
<dd><p>Character vector of column names to exclude from the proportion matrix (optional).</p></dd>


<dt id="arg-na-values">na_values<a class="anchor" aria-label="anchor" href="#arg-na-values"></a></dt>
<dd><p>Vector of values to treat as missing in addition to standard missing values.
Defaults to <code>c(NA, NaN, Inf, -Inf)</code>.</p></dd>


<dt id="arg-repeat-feature-names">repeat_feature_names<a class="anchor" aria-label="anchor" href="#arg-repeat-feature-names"></a></dt>
<dd><p>Character vector of "base" feature names that have repeated timepoints.
Repeat measurements must be in the form <code>&lt;feature&gt;_&lt;timepoint&gt;</code> where <code>&lt;feature&gt;</code>
is alphanumeric (and may include dots) and <code>&lt;timepoint&gt;</code> is an integer (e.g., <code>"CRP_1"</code>).</p></dd>


<dt id="arg-loose">loose<a class="anchor" aria-label="anchor" href="#arg-loose"></a></dt>
<dd><p>Logical. If True, will match any column starting with feature from repeat_feature_names</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A numeric matrix of dimension <code>nrow(data)</code> by <code>n_features</code>, where rows are
samples and columns are features (base names). Entries are per-sample missingness proportions in <code>[0, 1]</code>.
The returned matrix has an attribute <code>"feature_columns_map"</code>: a named list mapping each
output feature to the source columns used to compute its proportion.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"s"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  CRP_1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.2</span>, <span class="cn">NA</span>, <span class="fl">2.1</span>, <span class="cn">NaN</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  CRP_2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span>, <span class="fl">2.0</span>, <span class="fl">1.9</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  IL6_1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">0.7</span>, <span class="cn">Inf</span>, <span class="fl">0.4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  IL6_2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.6</span>, <span class="op">-</span><span class="cn">Inf</span>, <span class="fl">0.8</span>, <span class="fl">0.5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  Albumin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3.9</span>, <span class="fl">4.1</span>, <span class="fl">4.0</span>, <span class="cn">NA</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu">create_missingness_prop_matrix</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">df</span>,</span></span>
<span class="r-in"><span>  index_col <span class="op">=</span> <span class="st">"id"</span>,</span></span>
<span class="r-in"><span>  cols_ignore <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>  repeat_feature_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CRP"</span>, <span class="st">"IL6"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span>         <span class="co"># 4 x 3 (CRP, IL6, Albumin)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 4 3</span>
<span class="r-in"><span><span class="co"># per-sample proportion missing across CRP_1 and CRP_2</span></span></span>
<span class="r-in"><span><span class="va">m</span><span class="op">[</span> , <span class="st">"CRP"</span><span class="op">]</span>    </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1   2   3   4 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.5 1.0 0.0 0.5 </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">m</span>, <span class="st">"feature_columns_map"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Yasin Khadem Charvadeh, Kenneth Seier, Katherine S. Panageas, Danielle Vaithilingam, Mithat Gönen, Yuan Chen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

